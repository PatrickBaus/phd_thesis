name: "Build PDFs"
inputs:
  tex-filename:
     required: true
     description: "The base name of the input TeX file without the .tex extension."

  output-filename:
    required: true
    description: "The base name of the output PDF file without the .pdf extension."

outputs:
  value:
    description: "Mirrors the output filename"
    value: ${{ inputs.output-filename }}

runs:
  using: "composite"
  steps:
    - name: Build TeX file
      uses: docker://texlive/texlive:TL2022-historic
      with:
        entrypoint: latexmk
        args: "-lualatex ${{ inputs.tex-filename }}.tex"

    - name: Rename PDF if a different output filename was set
      if: ${{ inputs.tex-filename != inputs.output-filename }}
      run: mv ${{ inputs.tex-filename }}.pdf ${{ inputs.output-filename }}.pdf
      shell: bash

