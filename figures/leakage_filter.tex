\documentclass[svgnames]{standalone}
\usepackage{siunitx}
\usepackage[siunitx,europeanresistors,nooldvoltagedirection]{circuitikz}
\usetikzlibrary{calc,positioning,backgrounds,fit}

% Define constants here
\ctikzset{
  amplifiers/fill=cyan!25,
  sources/fill=green!70!black,
  diodes/fill=red,
  resistors/fill=blue!25,
  blocks/fill=orange!25,
}

\begin{document}
    \begin{circuitikz}[
        american currents,
        american voltages,
        scale=0.7,
        transform shape,
        show background rectangle,
        background rectangle/.style={fill=gray!10, rounded corners, ultra thick,draw=gray},
    ]
        \tikzstyle{every node}=[font=\small]
        \draw
            node[left]{$V_{set}$} (0,0) to[R, a=$R_f$, l=\qty{510}{\ohm}, o-*] ++(2.5,0) coordinate(tmp) -- ++(0,0.5) to [C, i>_=$I_{leak}$, l=\qty{150}{\uF}] ++(0,2) node[vcc] {$V_{sup}$}
            (tmp) -- ++(1.5,0) to[short, i=$I_{bias}$] ++(0.5,0) node[op amp, anchor=+] (op){}
            (op.-) -- ++(-0.5,0) -- ++(0,1) -| (op.out) to [short, *-o] ++(0.5,0) node[right] {$V_{out}$}
        ;
    \end{circuitikz}
\end{document}
